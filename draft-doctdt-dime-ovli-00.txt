


Diameter Maintenance and Extensions                     J. Korhonen, Ed.
(DIME)                                                    Renesas Mobile
Internet-Draft                                         September 5, 2013
Intended status: Standards Track
Expires: March 9, 2014


                      Dimeter Overload Indication
                      draft-docdt-dime-ovli-00.txt

Abstract

   This specification documents a Diameter Overload Control Indication
   and the dissemination of the overload indication information.

Requirements

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 9, 2014.

Copyright Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect



Korhonen                  Expires March 9, 2014                 [Page 1]

Internet-Draft         Dimeter Overload Indication        September 2013


   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  Terminology and Abbreviations . . . . . . . . . . . . . . . . . 3
   3.  Solution Overview . . . . . . . . . . . . . . . . . . . . . . . 3
     3.1.  Architectural Assumptions . . . . . . . . . . . . . . . . . 3
       3.1.1.  Diameter Agent Behaviour  . . . . . . . . . . . . . . . 3
       3.1.2.  Simplified Example Architecture . . . . . . . . . . . . 4
     3.2.  Clarifications to Diameter Base Protocol  . . . . . . . . . 5
     3.3.  Dissemination of the Overload Indication  . . . . . . . . . 5
       3.3.1.  Negotiation and Versioning  . . . . . . . . . . . . . . 5
       3.3.2.  Transmission of the Attribute Value Pairs . . . . . . . 5
     3.4.  Overload Condition Indication . . . . . . . . . . . . . . . 5
   4.  Attribute Value Pairs . . . . . . . . . . . . . . . . . . . . . 5
     4.1.  xyz AVP . . . . . . . . . . . . . . . . . . . . . . . . . . 5
     4.2.  abc AVP . . . . . . . . . . . . . . . . . . . . . . . . . . 5
     4.3.  Attribute Value Pair flag rules . . . . . . . . . . . . . . 5
   5.  Transport Considerations  . . . . . . . . . . . . . . . . . . . 6
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 6
     6.1.  AVP codes . . . . . . . . . . . . . . . . . . . . . . . . . 6
     6.2.  Result-Code values  . . . . . . . . . . . . . . . . . . . . 6
     6.3.  New registries  . . . . . . . . . . . . . . . . . . . . . . 6
   7.  Security Considerations . . . . . . . . . . . . . . . . . . . . 6
   8.  Design Team Members . . . . . . . . . . . . . . . . . . . . . . 6
   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 7
   10. References  . . . . . . . . . . . . . . . . . . . . . . . . . . 7
     10.1. Normative References  . . . . . . . . . . . . . . . . . . . 7
     10.2. Informative References  . . . . . . . . . . . . . . . . . . 7
   Appendix A.  Examples . . . . . . . . . . . . . . . . . . . . . . . 7
     A.1.  3GPP S6a interface overload indication  . . . . . . . . . . 7
     A.2.  3GPP PCC interfaces overload indication . . . . . . . . . . 8
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . . . 8













Korhonen                  Expires March 9, 2014                 [Page 2]

Internet-Draft         Dimeter Overload Indication        September 2013


1.  Introduction

   ...

   We also need to describe carefully what is in the scope of this
   document and what is left for the future documents.  Maybe this
   deserves a new subsection?


2.  Terminology and Abbreviations

   ...


3.  Solution Overview

3.1.  Architectural Assumptions

   Describe here on what basis the solution is intended to work.  This
   lists things like piggybacking, end-to-end semantics, role of
   Diameter agents, etc.

3.1.1.  Diameter Agent Behaviour

   In the context of the Diameter Overload Indication dissemination and
   reacting to the overload information, the functional behaviour of the
   Diameter agnets in front of servers, especially concerning Diameter
   proxies, has to be common.  This is topical since intelligent
   Diameter agents may actively participate to the overload condition
   handling (such as do intelligent next hop selection based on the
   overload conditions or aggregate overload information to be
   disseminated).  Further, Diameter agents may also have other
   deployment related tasks that are not defined in the Diameter base
   protocol [RFC6733].  These include, among others, topology hiding and
   acting as a server representative for a cluster of real Diameter
   servers for the Diameter client.  To be efficient, such network
   topologies imply that the Diameter agents in front of servers remain
   in the Diameter signaling path for all the messages related to the
   same session/user.

   Since the solution defined in this specification MUST NOT break the
   Diameter base protocol assumptions at any time, great care has to be
   taken not to assume functionality from the Diameter agents that
   would, at the base protocol level and between two Diameter end nodes
   break or assume functionality beyond the Diameter base protocol.
   Effectively this means the following from a Diameter agent:





Korhonen                  Expires March 9, 2014                 [Page 3]

Internet-Draft         Dimeter Overload Indication        September 2013


   o  A Diameter agent that impersonates itself as the "end node", i.e.
      the server to a Diameter client MUST NOT leak any Diameter base
      protocol level information of the Diameter nodes behind it.  From
      the Diameter client point of view the final destination to its
      requests and the original source for the answers MUST be the
      Diameter agent.  Effectively this requirement means the Diameter
      agent acts as a back-to-back-agent.  How the Diameter agent in
      this case appears to the Diameter nodes it is representing (i.e.
      the real Diameter servers), is an implementation and a deployment
      specific within the realm the Diameter agent is deployed.

   o  This requirement also implies that if the Diameter agent is not
      able to impersonate the servers behind it, the Diameter dialogue
      is always established between clients and servers and any overload
      information received by a client would be from a given server
      identified by the Origin-Host identity.

3.1.2.  Simplified Example Architecture

   **Early Draft!**

    Realm X                                  Other Realms
   <--------------------------------------> <---------------------->

   +--^-----+                 : (optional) :
   |Diameter|                 :            :
   |Server A|--+     .--.     : +---^----+ :     .--.
   +--------+  |   _(    `.   : |Diameter| :   _(    `.   +---^----+
               +--(        )--:-|  Agent |-:--(        )--|Diameter|
   +--------+  | ( `  .  )  ) : +-----^--+ : ( `  .  )  ) | Client |
   |Diameter|--+  `--(___.-'  :            :  `--(___.-'  +-----^--+
   |Server B|                 :            :
   +---^----+                 :            :
               Overload Indication A    Overload Indication A'
          1)  <----------------------> <---------------------->
              standard base protocol   standard base protocol

               End-to-end Overload Indication
          2)  <----------------------------------------------->
                          standard base protocol



     Simplified architecture choices for overload indication delivery







Korhonen                  Expires March 9, 2014                 [Page 4]

Internet-Draft         Dimeter Overload Indication        September 2013


3.2.  Clarifications to Diameter Base Protocol

   Describe here, assuming there is a need, what parts of the existing
   Diameter Base Protocol [RFC6733] needs clarification in the even of
   the overload condition.

3.3.  Dissemination of the Overload Indication

   Explain, e.g. the piggybacking of Overload Indication AVPs in this
   section.  Explain how possible feature negotiation is done?

3.3.1.  Negotiation and Versioning

3.3.2.  Transmission of the Attribute Value Pairs

3.4.  Overload Condition Indication

   Describe here what the overload condition indication is about.


4.  Attribute Value Pairs

   This section describes the encoding and semantics of Overload
   Indication Attribute Value Pairs (AVPs).

4.1.  xyz AVP

   ...

4.2.  abc AVP

   ...

4.3.  Attribute Value Pair flag rules

                                                       +---------+
                                                       |AVP flag |
                                                       |rules    |
                                                       +----+----+
                     AVP   Section                     |    |MUST|
    Attribute Name   Code  Defined  Value Type         |MUST| NOT|
   +---------------------------------------------------+----+----+
   |abc              TBD3  x.x      Grouped            |    | V  |
   +---------------------------------------------------+----+----+
   |xyz              TBD4  x.x      Unsigned32         |    | V  |
   +---------------------------------------------------+----+----+





Korhonen                  Expires March 9, 2014                 [Page 5]

Internet-Draft         Dimeter Overload Indication        September 2013


5.  Transport Considerations

   If anything needs to be said beyond what has been defined in
   Section 3.3.  One candidate is, e.g. the use of SCTP Payload Protocol
   Identifier (PPID).  Also one might spend some more time discussion
   the implications of agents between the "client" and the "server".


6.  IANA Considerations

6.1.  AVP codes

   New AVPs defined by this specification are listed in Section 4.  All
   AVP codes allocated from the 'Authentication, Authorization, and
   Accounting (AAA) Parameters' AVP Codes registry.

6.2.  Result-Code values

   This specification adds...:

   AVP Values | Attribute Name                | Reference
   -----------+-------------------------------+----------
    5xxx      | DIAMETER_xx                   | RFCxxxx
    5xxx      | DIAMETER_xx                   | RFCxxxx
    5xxx      | DIAMETER_xx                   | RFCxxxx

6.3.  New registries

   XYZ new registries are needed under the 'Authentication,
   Authorization, and Accounting (AAA) Parameters' registry:

   o  aaa.
   o  bbb.
   o  ccc.


7.  Security Considerations

   No end to end security.  We need to live with that.


8.  Design Team Members

   This document is a product of the following Diameter Overload Control
   Design Team members:






Korhonen                  Expires March 9, 2014                 [Page 6]

Internet-Draft         Dimeter Overload Indication        September 2013


   o  Ben Campbell
   o  Eric McMurry
   o  Hannes Tschofenig
   o  Jean-Jacques Trottin
   o  Jouni Korhonen
   o  Lionel Morand
   o  Maria Cruz Bartolome
   o  Martin Dolly
   o  Nirav Salot
   o  Steve Donovan
   o  Susan Shishufeng


9.  Acknowledgements

   ...


10.  References

10.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC5226]  Narten, T. and H. Alvestrand, "Guidelines for Writing an
              IANA Considerations Section in RFCs", BCP 26, RFC 5226,
              May 2008.

   [RFC6733]  Fajardo, V., Arkko, J., Loughney, J., and G. Zorn,
              "Diameter Base Protocol", RFC 6733, October 2012.

10.2.  Informative References

   [I-D.ietf-dime-overload-reqs]
              McMurry, E. and B. Campbell, "Diameter Overload Control
              Requirements", draft-ietf-dime-overload-reqs-10 (work in
              progress), July 2013.


Appendix A.  Examples

A.1.  3GPP S6a interface overload indication

   Would cover S6a MME-HSS communication with several topology choices
   (such as with or without DRA, and with "generic" agents).





Korhonen                  Expires March 9, 2014                 [Page 7]

Internet-Draft         Dimeter Overload Indication        September 2013


A.2.  3GPP PCC interfaces overload indication

   Would cover Gx/Rx and maybe S9..


Author's Address

   Jouni Korhonen (editor)
   Renesas Mobile
   Porkkalankatu 24
   Helsinki  FIN-00180
   Finland

   Email: jouni.nospam@gmail.com





































Korhonen                  Expires March 9, 2014                 [Page 8]

